(function(){var b=document&&document.currentScript&&document.currentScript.src;(window.webpackJsonpruntime=window.webpackJsonpruntime||[]).push([[10],{q6BR:function(C,a,i){"use strict";i.r(a),i.d(a,"init",function(){return O}),i.d(a,"clean",function(){return N}),i.d(a,"onPageChange",function(){return L});var h=i("zg8Y");class d{constructor({elementsSelector:e,listener:r,threshold:n}){this.onIntersection=o=>{o.forEach(c=>{c.isIntersecting?this.currentIntersecting.add(c.target):this.currentIntersecting.delete(c.target)}),this.listener(this.currentIntersecting)},this.elementSelector=e,this.listener=r,this.threshold=n,this.observer=new IntersectionObserver(this.onIntersection,{threshold:this.threshold}),this._init()}destroy(){this.elementsToMonitor.forEach(e=>{this.observer.unobserve(e)})}_init(){this.elementsToMonitor=document.querySelectorAll(this.elementSelector)||[],this.currentIntersecting=new Set([]),this.elementsToMonitor.forEach(e=>{this.observer.observe(e)})}reinit(){this.destroy(),this._init()}}d.displayName="ElementIntersectionObserver";function g({elementsSelector:t,listener:e=()=>{},threshold:r=.2}={}){return new d({elementsSelector:t,listener:e,threshold:r})}const f=".unifiednav",l="dmNavItemSelected",A="[data-anchor]",S=.35;let u;class m{constructor(){this.onObserverUpdated=e=>{this.currentIntersecting=Array.from(e)},this.onScroll=()=>{if(document.querySelector(".layout-drawer_open")||!this.currentIntersecting)return;const e=this.currentIntersecting.filter(r=>{const n=document.scrollingElement||document.documentElement;return(r.offsetTop-n.scrollTop)/window.innerHeight<S});this.transitioning||(this.transitioning=!0,window.requestAnimationFrame(()=>{this.navigationWidgets.forEach(r=>{(r.querySelectorAll("a")||[]).forEach(o=>{o.classList.remove(l);const c=o.getAttribute("href");I({href:c,intersectingElements:e})&&E(o)}),this.transitioning=!1}),p(e)}))},this.destroy=()=>{this.observer.destroy()},this._init()}reInitMarkers(){this._init()}_init(){if(!document.querySelectorAll(f)){this.observer&&this.observer.destroy(),document.removeEventListener("scroll",this.onScroll,{passive:!0});return}document.removeEventListener("scroll",this.onScroll,{passive:!0}),document.addEventListener("scroll",this.onScroll,{passive:!0}),this.observer=g({elementsSelector:A,threshold:.4,listener:this.onObserverUpdated}),this.navigationWidgets=Array.from(document.querySelectorAll(f))||[]}}m.displayName="AnchorMarker";function E(t){t.classList.add(l),v(t,[]).forEach(r=>{const n=r.querySelector("a");t&&n.classList.add(l)})}function v(t,e){return t.matches("nav")?e:(t.matches(".unifiednav__item-wrap")&&e.push(t),v(t.parentNode,e))}function I({intersectingElements:t,href:e}){return t[t.length-1]&&(e==null?void 0:e.includes(t[t.length-1].getAttribute("id")))}function p(t){t.length||Array.from(document.querySelectorAll(".currentPage")||[]).forEach(e=>{e.href.includes("#")||e.classList.add(l)})}function y(){return Object(h.a)("feature.flag.mark.anchors")?(u=new m,u):null}function T(){Object(h.a)("feature.flag.mark.anchors")&&u.destroy()}let s;function O(){return s=y(),Promise.resolve()}function L(){s&&s.reInitMarkers()}function N(){s&&s.clean()}}}])})();
