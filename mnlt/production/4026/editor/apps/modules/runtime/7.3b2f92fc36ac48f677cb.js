(function(){var B=document&&document.currentScript&&document.currentScript.src;(window.webpackJsonpruntime=window.webpackJsonpruntime||[]).push([[7],{ln0a:function(D,i,u){"use strict";u.r(i),u.d(i,"countWidgetTypes",function(){return d}),u.d(i,"countButtonTypes",function(){return m}),u.d(i,"countImages",function(){return g}),u.d(i,"collectWidgetCount",function(){return W});var v=u("yXPU"),l=u.n(v),T=u("qVr0");const c="[data-widget-type], [data-element-type]";function d(){const t=document.querySelectorAll(c),e=Array.from(t).reduce(y({generateFeatureKey:n=>`widget-${h(n)}`}),{});return Object.values(e)}function m(){const t=document.querySelectorAll(c),e=Array.from(t).filter(f).reduce(y({generateFeatureKey:n=>`${M(n)}-${h(n)}`}),{});return Object.values(e)}function b(){const t=document.querySelectorAll('[data-element-type="mapextension"][provider="mappy"][data-radius-toggle="true"]');return t.length?[{feature:"maps-mappy-radius",count:t.length}]:[]}function A(){const t=document.querySelectorAll('[data-element-type="html"]'),e=["acuityscheduling","tidycal","Calendly","simplybookme","fareharbor","bookalet","bookeo"];return Array.from(t).find(r=>e.some(o=>r.innerHTML.toLowerCase().includes(o)))?[{feature:"booking-script",count:1}]:[]}function S(){const t=document.querySelectorAll(c),e=["book","appointment","schedule"];return Array.from(t).filter(f).find(r=>e.some(o=>r.innerHTML.toLowerCase().includes(o)))?[{feature:"booking-text",count:1}]:[]}function g(){const t=document.querySelectorAll("img"),e=document.querySelectorAll("img[alt]");return[{feature:"all-image-elements",count:t.length},{feature:"all-image-elements-with-alt",count:e.length}]}function W(t){return a.apply(this,arguments)}function a(){return a=l()(function*(t){var e;if(!Object(T.a)("scripts.widgetCount.enabled"))return;const n=t||d().concat(b()).concat(m()).concat(A()).concat(S()).concat(g()),{_currentPage:r,Parameters:o}=window,P={features:n,siteAlias:o==null?void 0:o.SiteAlias,sitePublicationDate:o!=null&&o.PublicationDate?new Date(o==null?void 0:o.PublicationDate).getTime():0,pageType:o==null?void 0:o.pageType,pageUuid:(r==null||(e=r.pageContent)===null||e===void 0?void 0:e.uuid)||(o==null?void 0:o.InitialPageUuid)||`${r==null?void 0:r.pageID}`,path:location.pathname};C(P)}),a.apply(this,arguments)}function C(t){return s.apply(this,arguments)}function s(){return s=l()(function*(t){try{var e;const n=(e=window.rtCommonProps)===null||e===void 0?void 0:e["runtimecollector.url"];if(!n)return;yield fetch(`${n}/feature/metrics`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)})}catch(n){console.debug("Failed send metrics for feature count",n)}}),s.apply(this,arguments)}function y({generateFeatureKey:t}){return(e,n)=>{const r=t(n);return e[r]||(e[r]={feature:r,count:0}),e[r].count+=1,e}}const f=t=>{const e=t.classList.contains("dmWidget")&&p(t),n=Array.from(t.querySelectorAll(".dmWidget")).some(r=>p(r));return e||n};function p(t){return window.getComputedStyle(t).getPropertyValue("display")!=="none"}function M(t){return t.classList.contains("button_2")||t.querySelector(".button_2")?"button-secondary":"button-primary"}const h=t=>{const e=t.getAttribute("data-widget-type")||t.getAttribute("data-element-type"),n=t.getAttribute("data-widget-id");return n?`${e}-${n}`:e}}}])})();
